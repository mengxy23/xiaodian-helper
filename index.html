
<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8" />
<title>小电助手 V9 · Vercel 接口版</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
body{font-family:sans-serif;margin:0;background:#f5f7fa}header{background:#0074D9;color:#fff;padding:1rem;text-align:center}nav{display:flex;flex-wrap:wrap;justify-content:center;gap:0.5rem;background:#e6f3ff;padding:0.75rem}nav button{padding:0.5rem 1rem;border-radius:6px;border:1px solid #0074D9;background:#fff;color:#0074D9;font-weight:bold;cursor:pointer}section{display:none;padding:1.5rem;max-width:720px;margin:auto;background:#fff;border-radius:1rem;margin-top:1rem;box-shadow:0 2px 8px rgba(0,0,0,0.05)}section.active{display:block}h2{color:#0074D9}ul{padding-left:1.2rem}li{margin-bottom:0.5rem}
</style>
</head>
<body>
<header>小电助手 V9 · 接入中转服务</header>
<nav>
  <button onclick="showTab('weather')">天气</button>
  <button onclick="showTab('hot')">热点</button>
  <button onclick="showTab('jieqi')">节气</button>
</nav>
<section id="weather"><h2>天气预报</h2><p id="weatherData">加载中...</p></section>
<section id="hot"><h2>热点资讯</h2><ul id="hotList"><li>加载中...</li></ul></section>
<section id="jieqi"><h2>📅 二十四节气</h2><div id="jieqiData">加载中...</div></section>
<script>
function showTab(id) {
  document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

fetch("https://xiaodian-proxy.vercel.app/api/weather")
.then(res => res.json()).then(data => {
  const w = data.result;
  document.getElementById("weatherData").innerText = `${w.area}，${w.weather}，${w.low}~${w.high}℃，${w.wind}，${w.windsc}级`;
}).catch(err => {
  document.getElementById("weatherData").innerText = "天气加载失败：" + err.message;
});
fetch("https://xiaodian-proxy.vercel.app/api/hot")
.then(res => res.json()).then(data => {
  const list = data.result?.list || [];
  const ul = document.getElementById("hotList");
  ul.innerHTML = "";
  list.slice(0, 5).forEach(item => {
    const li = document.createElement("li");
    li.textContent = item.title;
    ul.appendChild(li);
  });
}).catch(err => {
  document.getElementById("hotList").innerHTML = "<li>热点加载失败：" + err.message + "</li>";
});
async function loadAllJieqi() {
  const container = document.getElementById("jieqiData");
  container.innerHTML = "加载中...";
  try {
    const response = await fetch("https://xiaodian-proxy.vercel.app/api/jieqi");
    const data = await response.json();
    if (data.code === 200 && data.result && Array.isArray(data.result.list)) {
      const list = data.result.list;
      let html = "<ul>";
      list.forEach(j => {
        html += `<li><strong>${j.name}</strong>（${j.date}）：${j.des}</li>`;
      });
      html += "</ul>";
      container.innerHTML = html;
    } else {
      container.innerHTML = "无法获取节气列表，请检查接口状态。";
    }
  } catch (err) {
    container.innerHTML = "节气加载失败：" + err.message;
  }
}
window.onload = loadAllJieqi;

</script></body></html>
