<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>å°ç”µåŠ©æ‰‹ V9 Â· èŠ‚æ°”æ•´åˆ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f5f7fa; }
    header { background: #0074D9; color: white; padding: 1rem; text-align: center; font-size: 1.3rem; }
    nav { display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem; background: #e6f3ff; padding: 0.75rem; }
    nav button {
      padding: 0.5rem 1rem; border-radius: 6px; border: none;
      background: white; color: #0074D9; font-weight: bold; cursor: pointer;
      border: 1px solid #0074D9;
    }
    section {
      display: none; padding: 1.5rem; max-width: 720px;
      margin: auto; background: white; border-radius: 1rem;
      margin-top: 1rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    section.active { display: block; }
    .chat-box { display: flex; flex-direction: column; gap: 1rem; max-height: 60vh; overflow-y: auto; }
    .chat-message { max-width: 80%; padding: 0.75rem 1rem; border-radius: 12px; line-height: 1.5; }
    .user { align-self: flex-end; background: #0074D9; color: white; }
    .bot { align-self: flex-start; background: #e0f0ff; }
    .input-bar { display: flex; margin-top: 1rem; }
    .input-bar input {
      flex: 1; padding: 0.5rem; border-radius: 6px; border: 1px solid #ccc;
    }
    .input-bar button {
      margin-left: 0.5rem; background: #0074D9; color: white;
      border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer;
    }
    .role-toggle { text-align: center; margin: 0.5rem 0; }
    .role-toggle button {
      padding: 0.4rem 0.8rem; margin: 0 0.25rem; font-weight: bold;
      border-radius: 6px; border: none; cursor: pointer;
    }
    h2 { color: #0074D9; }
    ul { padding-left: 1.2rem; }
    li { margin-bottom: 0.5rem; }
  </style>
</head>
<body>
<header>å°ç”µåŠ©æ‰‹ V9 Â· èŠ‚æ°”æ•´åˆç‰ˆ</header>
<nav>
  <button onclick="showTab('chat')">AI èŠå¤©</button>
  <button onclick="showTab('faq')">å¸¸è§é—®é¢˜</button>
  <button onclick="showTab('notice')">æ ¡å†…é€šçŸ¥</button>
  <button onclick="showTab('contact')">è”ç³»æˆ‘ä»¬</button>
  <button onclick="showTab('weather')">å¤©æ°”</button>
  <button onclick="showTab('hot')">çƒ­ç‚¹</button>
  <button onclick="showTab('jieqi')">èŠ‚æ°”</button>
</nav>
<section id="chat" class="active">
  <div class="role-toggle">
    <button style="background:#0074D9;color:white" onclick="setRole('xiaodian')">å°ç”µ</button>
    <button style="background:#ff66b2;color:white" onclick="setRole('akong')">é˜¿ç©º</button>
  </div>
  <div class="chat-box" id="chatBox">
    <div class="chat-message bot">ä½ å¥½ï¼Œæˆ‘æ˜¯å°ç”µï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ</div>
  </div>
  <div class="input-bar">
    <input id="userInput" placeholder="è¯·è¾“å…¥ä½ çš„é—®é¢˜..." />
    <button onclick="sendMessage()">å‘é€</button>
  </div>
</section>
<section id="faq"><h2>å¸¸è§é—®é¢˜</h2><ul><li>è¾…å¯¼å‘˜å·¥ä½œæ—¶é—´ï¼šå‘¨ä¸€è‡³å‘¨äº” 8:00â€“11:30ï¼Œ13:30â€“16:30</li><li>è¯·å‡æµç¨‹ï¼šä¸Šè¯¾å‰30åˆ†é’Ÿå‘ä»»è¯¾æ•™å¸ˆå’Œè¾…å¯¼å‘˜è¯·å‡ï¼Œç»åŒæ„åæ–¹å¯ä¸å»ä¸Šè¯¾</li></ul></section>
<section id="notice"><h2>ğŸ“¢ æ ¡å†…é€šçŸ¥</h2><ul><li><strong>ã€2025-04-22ã€‘</strong> å…³äºâ€œäº”ä¸€å‡æœŸå­¦ç”Ÿç¦»æ ¡æŠ¥å¤‡â€çš„é€šçŸ¥</li><li><strong>ã€2025-04-20ã€‘</strong> æœ¬ç§‘è¯¾ç¨‹æœŸä¸­è€ƒè¯•å®‰æ’è¯´æ˜</li><li><strong>ã€2025-04-17ã€‘</strong> å‰æ—å¤§å­¦å¿ƒç†å¥åº·æ•™è‚²æœˆç³»åˆ—è®²åº§é€šçŸ¥</li><li><strong>ã€2025-04-15ã€‘</strong> æ•™å­¦æ¥¼å¼€æ”¾æ—¶é—´è°ƒæ•´</li></ul><p style="font-size: 0.9rem; color: #777;">å¦‚éœ€æ›´æ–°ï¼Œè¯·æ‰‹åŠ¨ä¿®æ”¹æ­¤é¡µé¢ä¸­çš„é€šçŸ¥å†…å®¹ã€‚</p></section>
<section id="contact"><h2>è”ç³»æˆ‘ä»¬</h2><ul><li>å­¦å·¥åŠï¼š0431-85168413</li><li>æ•™åŠ¡åŠï¼š0431-85168415</li><li>ç ”ç©¶ç”ŸåŠï¼š0431-85168416</li></ul></section>
<section id="weather"><h2>å¤©æ°”é¢„æŠ¥ï¼ˆé•¿æ˜¥ï¼‰</h2><p id="weatherData">åŠ è½½ä¸­...</p></section>
<section id="hot"><h2>çƒ­ç‚¹èµ„è®¯</h2><ul id="hotList"><li>åŠ è½½ä¸­...</li></ul></section>
<section id="jieqi"><h2>ğŸ“… äºŒåå››èŠ‚æ°”ï¼ˆå¹´åº¦èŠ‚æ°”è¡¨ï¼‰</h2><div id="jieqiData">åŠ è½½ä¸­...</div></section>
<script>
let role = 'xiaodian';
const prompts = {
  xiaodian: `ä½ æ˜¯ç”µå­ç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢â€œå°ç”µâ€AIåŠ©æ‰‹ï¼Œè¯­æ°”ç†æ€§äº²åˆ‡ã€‚1. è¾…å¯¼å‘˜å·¥ä½œæ—¶é—´ä¸ºå‘¨ä¸€è‡³å‘¨äº”ä¸Šåˆ8:00-11:30ï¼Œä¸‹åˆ1:30-4:30ã€‚2. è¯·å‡å‰è‡³å°‘æå‰30åˆ†é’Ÿå‘ä»»è¯¾æ•™å¸ˆå’Œè¾…å¯¼å‘˜è¯·å‡ã€‚3. å¦‚ç”¨æˆ·è¯´â€œå¿ƒæƒ…ä¸å¥½â€ï¼Œå»ºè®®è”ç³»è¾…å¯¼å‘˜æˆ–å…³æ³¨â€œå‰æ—å¤§å­¦å¿ƒç†ä¸­å¿ƒâ€ã€‚`,
  akong: `ä½ æ˜¯ç”µå­ç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢â€œé˜¿ç©ºâ€AIåŠ©æ‰‹ï¼Œè¯­æ°”æ¸©æŸ”ä½“è´´ã€‚è‹¥ç”¨æˆ·æåŠæƒ…ç»ªå›°æ‰°ï¼Œè¯·æ¸©æŸ”é¼“åŠ±å…¶ä¸è¾…å¯¼å‘˜æ²Ÿé€šï¼Œæˆ–å’¨è¯¢å¿ƒç†ä¸­å¿ƒã€‚`
};
function showTab(id) {
  document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}
function setRole(r) {
  role = r;
  const msg = document.createElement("div");
  msg.className = "chat-message bot";
  msg.textContent = role === 'xiaodian' ? "åˆ‡æ¢ä¸ºå°ç”µï¼Œæœ‰ä»€ä¹ˆé—®é¢˜é—®æˆ‘å§ï¼" : "åˆ‡æ¢ä¸ºé˜¿ç©ºï¼Œæˆ‘åœ¨å‘¢~";
  document.getElementById("chatBox").appendChild(msg);
}
async function sendMessage() {
  const input = document.getElementById("userInput");
  const text = input.value.trim();
  if (!text) return;
  const box = document.getElementById("chatBox");
  box.innerHTML += `<div class="chat-message user">${text}</div>`;
  const bot = document.createElement("div");
  bot.className = "chat-message bot";
  bot.textContent = "æ€è€ƒä¸­...";
  box.appendChild(bot);
  box.scrollTop = box.scrollHeight;
  input.value = "";
  try {
    const res = await fetch("https://api.deepseek.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer sk-f9b2fada759840ae833aeee0d4fc0cbb"
      },
      body: JSON.stringify({
        model: "deepseek-chat",
        messages: [
          { role: "system", content: prompts[role] },
          { role: "user", content: text }
        ]
      })
    });
    const data = await res.json();
    bot.textContent = data.choices?.[0]?.message?.content || "æŠ±æ­‰ï¼Œå°ç”µæš‚æ—¶æ— æ³•å›ç­”~";
    box.scrollTop = box.scrollHeight;
  } catch (e) {
    bot.textContent = "å‡ºé”™äº†ï¼š" + e.message;
  }
}

fetch("https://api.tianapi.com/tianqi/index?key=c652bd1f2d34516b23d1e55e9cd98634&city=é•¿æ˜¥")
.then(res => res.json()).then(data => {
  const w = data.result;
  document.getElementById("weatherData").innerText = `${w.area}ï¼Œ${w.weather}ï¼Œ${w.low}~${w.high}â„ƒï¼Œ${w.wind}ï¼Œ${w.windsc}çº§`;
}).catch(err => {
  document.getElementById("weatherData").innerText = "å¤©æ°”åŠ è½½å¤±è´¥ï¼š" + err.message;
});
fetch("https://api.tianapi.com/hot/index?key=c652bd1f2d34516b23d1e55e9cd98634")
.then(res => res.json()).then(data => {
  const list = data.result?.list || [];
  const ul = document.getElementById("hotList");
  ul.innerHTML = "";
  list.slice(0, 5).forEach(item => {
    const li = document.createElement("li");
    li.textContent = item.title;
    ul.appendChild(li);
  });
}).catch(err => {
  document.getElementById("hotList").innerHTML = "<li>çƒ­ç‚¹åŠ è½½å¤±è´¥ï¼š" + err.message + "</li>";
});

async function loadAllJieqi() {
  const key = "c652bd1f2d34516b23d1e55e9cd98634";
  const container = document.getElementById("jieqiData");
  container.innerHTML = "åŠ è½½ä¸­...";

  try {
    const response = await fetch("https://apis.tianapi.com/jieqilist/index?key=" + key);
    const data = await response.json();

    if (data.code === 200 && data.result && Array.isArray(data.result.list)) {
      const list = data.result.list;
      let html = "<ul>";
      list.forEach(j => {
        html += `<li><strong>${j.name}</strong>ï¼ˆ${j.date}ï¼‰ï¼š${j.des}</li>`;
      });
      html += "</ul>";
      container.innerHTML = html;
    } else {
      container.innerHTML = "æ— æ³•è·å–èŠ‚æ°”åˆ—è¡¨ï¼Œè¯·æ£€æŸ¥ API Key æˆ–æ¥å£çŠ¶æ€ã€‚";
    }
  } catch (err) {
    container.innerHTML = "èŠ‚æ°”åŠ è½½å¤±è´¥ï¼š" + err.message;
  }
}
window.onload = loadAllJieqi;
</script>
</body>
</html>